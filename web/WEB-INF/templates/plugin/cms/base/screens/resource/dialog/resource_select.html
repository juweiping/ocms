<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Pragma"  content="no-cache"/>
<meta http-equiv="Cache-Control" content="no-cache"/>
<title>resource_select</title>
<base  href="${helper.getBaseURL()}"/>
<link rel='stylesheet' type='text/css' href='html/plugin/cms/base/css/style.css'/>
<style type="text/css">
<#if category=="img">
div.imagespacer {
	width: 110;
	height: 156;
	text-align: center;
	float: left;
	font: 10pt verdana;
	margin: 5px;
	overflow: hidden;
}
div.imageholder {
	margin: 0px;
	padding: 0px;
	border: 1 solid #CCCCCC;
 	width: 100;
	height: 100;
}

div.titleholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	width: 110;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
}
<#elseif category=="flash">
div.imagespacer {
	width: 110;
	height: 156;
	text-align: center;
	float: left;
	font: 10pt verdana;
	margin: 5px;
	overflow: hidden;
}
div.imageholder {
	margin: 0px;
	padding: 0px;
	border: 1 solid #CCCCCC;
 	width: 100;
	height: 100;
}

div.titleholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	width: 110;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
}
<#elseif category=="attach">
body,tr,td,select {
	color: #000000;
	font-size: 11px; font-family: Tahoma, Arial;

}

div.imagespacer {
	width: ;
	height: 18;
	text-align: left;
	float: left;
	font: 10pt verdana;
	margin: 0px;
	overflow: hidden;
}
div.imageholder {
	margin: 0px;
	height: 16;
	padding: 0px;
	cursor: default;
}

div.titleholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	width: 100;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
}
.3d {
	border-top-width: 1px;
	border-right-width: 1px;
	border-bottom-width: 1px;
	border-left-width: 1px;
	border-top-style: solid;
	border-right-style: solid;
	border-bottom-style: solid;
	border-left-style: solid;
	border-top-color: #FFFFFF;
	border-right-color: #808080;
	border-bottom-color: #808080;
	border-left-color: #FFFFFF;
	background-color: #D4D0C8;
}
</#if>
</style>
<script language="javascript" src="html/common/js/mouse_up.js"></script>
<script language="javascript">
lastDiv = null;
function divClick(theDiv,filename) {
	if (lastDiv) {
		lastDiv.style.border = "1 solid #CCCCCC";
	}
	lastDiv = theDiv;
	theDiv.style.border = "2 solid #316AC5";

	document.getElementById("FileToDelete").value = filename;

}
function divClick2(theDiv,filename) {
	if (lastDiv) {
		lastDiv.style.border = "0 solid #CCCCCC";
	}
	lastDiv = theDiv;
	theDiv.style.border = "2 solid #316AC5";

	document.getElementById("FileToDelete").value = filename;

}
function gotoFolder(rootfolder,newfolder) {
	//
}
function returnImage(imagename,width,height) {
	var arr = new Array();
	arr["filename"] = imagename;
	arr["width"] = width;
	arr["height"] = height;
	window.parent.returnValue = arr;
	window.parent.close();
}
function openwin(targeturl) {

		window.open(targeturl, '', 'width=300,height=170,resizable=1,scrollbars=yes');

}
function loadBarDisplay()
{
  var x,y;
   x = document.body.clientWidth;
   y = document.body.clientHeight;

		var top = (y/2) - 50;
		var left = (x/2) - 150;
		if( left<=0 ) left = 10;


	loader.style.left = left + "px"
	loader.style.top = top + "px";

	loader.style.display='';

	return;

}

function loadBarUnDisplay()
{
	loader.style.display='none';

}
</script>
</head>
<body topmargin="0" leftmargin="0">
<DIV id=loader style="DISPLAY: none; Z-INDEX: 2; LEFT: 0px; POSITION: absolute; TOP: 0px">
<TABLE class=loader style="FILTER: Alpha(opacity=75)" cellSpacing=1 cellPadding=5

bgColor=#bbbbb summary="Loader Layout" border=0>
  <TBODY><TR><TD align=left bgColor=#ffffff>
      <P><IMG style="MARGIN: 3px" height=32   src="html/common/images/clocks.gif" width=32

align=left><STRONG>文件正在上传中...</STRONG><BR>
	  <SPAN style="FONT-SIZE: 8pt">Please wait until this uploading is completely

finished.</SPAN></P></TD></TR></TBODY></TABLE>
</DIV>
<form name="form" method="post"  enctype="multipart/form-data">
<input name="FileToDelete" id="FileToDelete" type="hidden" />
	<input name="RootImagesFolder" id="RootImagesFolder" type="hidden" value="images" />
	<input name="CurrentImagesFolder" id="CurrentImagesFolder" type="hidden" value="images" />
<#if category=="img">
    <#list resources as resource1>
		<#list resource1 as r1>
			<#if r1_index==0>
				<#assign resource=r1 />
			<#else>
		    	<#assign userName=r1 />
			</#if>
		</#list>

		<div class="imagespacer" >
			<div class="imageholder" unselectable="on"  ondblclick="openwin('${baseUrl}resource/${resource.path}')"  onclick="divClick(this); parent.document.form.fileName.value='${resource.path}';parent.document.form.returnFileName.value='${resource.path}'; parent.document.form.fileTitle.value='${resource.title}';parent.document.form.fileId.value='${resource.resourceId?c}' " >
				<img src="${baseUrl}/resource/${resource.path}" width="100" height="100" unselectable="on" align="absmiddle"   border=0   />
			</div>
			<div class="titleHolder">
			${resource.title}
			</div>
		</div>
		</#list>
<#elseif category=="flash">
    <#list resources as resource1>
		<#list resource1 as r1>
			<#if r1_index==0>
				<#assign resource=r1 />
			<#else>
		    	<#assign userName=r1 />
			</#if>
		</#list>
	<div class="imagespacer" >
			<div class="imageholder" unselectable="on"  ondblclick="openwin('${baseUrl}resource/${resource.path}')"  onclick="divClick(this); parent.document.form.fileName.value='${resource.path}';parent.document.form.returnFileName.value='${resource.path}'; " >
				<object width=100 height=100 classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" ><param name="movie" value="${baseUrl}resource/${resource.path}"><param name="quality" value="autohigh"><embed width=100 height=100 src="${baseUrl}resource/${resource.path}" quality="autohigh"  type="application/x-shockwave-flash" plugspace="http://www.macromedia.com/go/getflashplayer"></embed></object>
			</div>
			<div class="titleHolder" onDblClick="openwin('${baseUrl}resource/${resource.path}')"  onclick="divClick(this); parent.document.form.fileName.value='${resource.path}';parent.document.form.returnFileName.value='${resource.path}'; parent.document.form.fileTitle.value='${resource.title}';">
			${resource.title}
			</div>
	</div>
	</#list>
<#elseif category="attach"||category="sattach">
	<table border="0" cellpadding="1" cellspacing="0" width=100% >
	<tr>
	<td colspan="2"  class="3d" height=15>&nbsp;&nbsp;名称</td>
	<td class="3d" align=center>大小&nbsp;&nbsp;</td>
	<td class="3d">&nbsp;&nbsp;创建时间</td>
	<td class="3d">&nbsp;&nbsp;创建人</td>
	</tr>
	<#list resources as resource1>
		<#list resource1 as r1>
			<#if r1_index==0>
				<#assign resource=r1 />
			<#else>
		    	<#assign userName=r1 />
			</#if>
		</#list>
		<TR onmouseover='this.style.backgroundColor="#F1F1F1"'
                    onmouseout='this.style.backgroundColor=""'>

				<TD width=16 height=16>
				<#assign type=resource.name[resource.name?last_index_of(".")+1..resource.name?length-1]/>
 		<IMG src="html/common/images/icon/${type}.gif" border=0  width="16" height="16">

				</TD>
				<TD>
				 <div onClick="divClick2(this); parent.document.form.fileName.value='${resource.path}';parent.document.form.returnFileName.value='${resource.path}'; parent.document.form.fileTitle.value='${resource.title}';">
			${resource.title}</div>
				</TD>
				<td align=right>
			${resource.size}KB</td>
<td>&nbsp;&nbsp;${action.getDate(resource.creationDate)?string("yyyy-MM-dd HH:mm")}</td>
<td>&nbsp;&nbsp;${userName}</td>

	</TR>
	</#list>
	</table>
</#if>

</form>
</body>
</html>